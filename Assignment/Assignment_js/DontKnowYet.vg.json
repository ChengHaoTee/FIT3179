{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title":"Top 10 Countries Score",
  "width":800,
  "data": {"url": "https://raw.githubusercontent.com/ChengHaoTee/FIT3179/main/Assignment/Assignment_Data/2020_Top10_Score.csv"},
  "height": {"step": 50},
  
  "layer": [{
      "params": [{
          "name": "Selection",
          "value":[{"Selection":2016}],
          "select": {"type": "point", "fields": ["Year"]},
          "bind": {"input": "select", "options": [2016,2017,2018,2019,2020]}
      }],

      "transform": [{"filter": "datum.Year ==Selection" }],
    "mark": {"type": "bar", "yOffset": 10, "cornerRadiusEnd": 2, "height": {"band": 0.5}},
    "encoding": {
    "y": {
      "field": "Country name",
      "scale": {"padding": 0},
      "axis": {
        "bandPosition": 0,
        "grid": true,
        "domain": false,
        "ticks": false,
        "labelAlign": "left",
        "labelBaseline": "middle",
        "labelPadding": -5,
        "labelOffset": -15,
        "titleX": 5,
        "titleY": -5,
        "titleAngle": 0,
        "titleAlign": "left"
      },
      "sort":{"field":"Ladder score"}
    },
    "x": {
      "field": "Ladder score",
      "aggregate":"max",
      "axis": {"grid": false},
      "title": "Ladder score"
    },
    "color": {
      "condition": {
        "param": "Selection",
        "field": "Regional indicator", "type": "nominal"
      },
      "value": "grey"
    },

    "tooltip":[
      {"field":"Country name","type":"nominal" },
      {"field":"Ladder score","type": "quantitative","format":".2f"}
    ]
  }
  },
  {
      "mark": {
      "type": "text",
      "align": "right",
      "baseline": "middle",
      "dx": 500,
      "dy": 200,
      "fontSize": 20,
      "fontWeight":"bold",
      "fontStyle": "italic"
      },
      "transform": [{
        "calculate": "datum['Country name'] + ',' +datum['Ladder score']","as": "Score"  
      },
    {
      "calculate": "split(datum.Score,',')","as": "Score_split"
    }
  ],
      "encoding": {
      "text": {"field": "Score_split", "type": "nominal"},
      "color": {"value": "red"},
      "opacity": {
      "condition": {
      "test": "datum['Country name'] == 'Finland'",
      "value": 1
      },
      "value": 0
      }
    }
  }
]
}